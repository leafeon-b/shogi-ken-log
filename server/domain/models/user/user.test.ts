import { describe, expect, test } from "vitest";
import { userId } from "@/server/domain/common/ids";
import { createUser } from "@/server/domain/models/user/user";

describe("User ドメイン", () => {
  test("createUser は任意項目が未指定でも生成できる", () => {
    const user = createUser({
      id: userId("user-1"),
    });

    expect(user.name).toBeNull();
    expect(user.email).toBeNull();
    expect(user.image).toBeNull();
  });

  test("createUser は指定された値を保持する", () => {
    const createdAt = new Date("2024-01-01T00:00:00Z");
    const user = createUser({
      id: userId("user-2"),
      name: "Sota Fujii",
      email: "sota@example.com",
      image: "https://example.com/avatar.png",
      createdAt,
    });

    expect(user.name).toBe("Sota Fujii");
    expect(user.email).toBe("sota@example.com");
    expect(user.image).toBe("https://example.com/avatar.png");
    expect(user.createdAt).toBe(createdAt);
  });
});
